# Проект "Обмен валют"

REST API для работы с валютами и обменными курсами. Проект предоставляет возможность:
- Просматривать список валют и обменных курсов.
- Добавлять новые валюты и обменные курсы.
- Выполнять конвертацию сумм между валютами.

Веб-интерфейс не реализован, работа с проектом осуществляется через REST API.

## Возможности API
### Валюты
- **GET /currencies**: Получение списка всех валют.
- **GET /currency/{code}**: Получение информации о конкретной валюте по её коду.
- **POST /currencies**: Добавление новой валюты в базу.

### Обменные курсы
- **GET /exchangeRates**: Получение списка всех курсов обмена.
- **GET /exchangeRate/{codes}**: Получение курса обмена для конкретной пары валют
- **POST /exchangeRates**: Добавление нового курса обмена.
- **PATCH /exchangeRate/{codes}**: Добавление изменения существующего курса обмена.

### Конвертация
- **GET GET /exchange?from=BASE_CURRENCY_CODE&to=TARGET_CURRENCY_CODE&amount=$AMOUNT**: Выполнение расчёта конвертации суммы из одной валюты в другую.

## Используемые технологии
- **Java**: Работа с коллекциями, ООП.
- **Сервлеты**: Реализация REST API.
- **JDBC**: Работа с базой данных.
- **JSON**: Формат обмена данными.
- **HTTP**: Поддержка методов GET и POST, корректная обработка кодов ответа.

## Ссылка на полное описание требований
Все детали проекта, включая требования и примеры запросов, доступны по ссылке:  
[Требования к проекту](https://zhukovsd.github.io/java-backend-learning-course/projects/currency-exchange/)

## Запуск
Перед запуском проекта нужно запустить базу данных Postgres, заполнить её необходимыми данными.
Предлагаю использовать готовый образ из DockerHub
```bash
docker run --name currency_exchange_db -p 5432:5432 -d grossradomir/currency_exchange:db
```
Далее можно запустить REST API из среды разработки IntelliJ IDEA.  

Обратите внимание, что проект настроен для контейнерного запуска через **Docker**. Для того чтобы проект работал вне контейнерной связки, вам необходимо изменить настройки подключения к базе данных в классе `SessionFactory.java`.

Откройте файл:
   ```java
   src/main/java/com/gross/currency_exchange_backend/utils/SessionFactory.java
```
#### В строке ниже поменяйте адрес
 ```java
  config.setJdbcUrl("jdbc:postgresql://db:5432/currency_db");
```
#### Например, на
 ```java
  config.setJdbcUrl("jdbc:postgresql://localhost:5432/currency_db");
```
После запуска можно делать REST запросы.

Для проверки запросов можно использовать Postman collection, которая лежит в корне проекта

Также можно запустить проект в связке с готовым тестовым фронтендом,
предоставленным Сергеем Жуковым.  
[фронтенд](https://github.com/zhukovsd/currency-exchange-frontend.)  

Для этого нужно в корне проекта отредактировать файл ```docker-compose.yml```.
В настройках запуска контейнера с фронтендом есть строка с указанием хоста, соответственно
нужно указать хост, на котором будут разворачиваться контейнеры.

```java
 - API_HOST=http://176.113.82.42:8080
```
После указания адреса, можно разворачивать контейнеры, нужно через терминал, в корне проекта ввести
```docker compose up``` , после этого запустятся 3 контейнера: база данных, фронтенд, бэкенд.

Временно вышеуказанные 3 контейнера, развернуты по адресу  

http://176.113.82.42